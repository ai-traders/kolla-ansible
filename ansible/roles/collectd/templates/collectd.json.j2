{% set collectd_config = '/etc/collectd/collectd.conf' if kolla_base_distro in ['ubuntu', 'debian'] else '/etc/collectd.conf' %}

{
    "command": "/usr/bin/collectd-silent",
    "config_files": [
        {
            "source": "{{ container_config_directory }}/collectd.conf",
            "dest": "{{ collectd_config }}",
            "owner": "collectd",
            "perm": "0600"
        }
        {% if enable_ceph | bool %},
        {
            "source": "{{ container_config_directory }}/ceph.client.collectd.keyring",
            "dest": "/etc/ceph/",
            "owner": "collectd",
            "perm": "0700"
        },
        {
            "source": "{{ container_config_directory }}/ceph.conf",
            "dest": "/etc/ceph/",
            "owner": "collectd",
            "perm": "0700"
        }{% endif %}
    ],
    "permissions": [
        {
            "path": "/var/log/kolla/collectd",
            "owner": "collectd:collectd",
            "recurse": true
        }
    ]
}
